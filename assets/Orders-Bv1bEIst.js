import{G as v,j as e,r as u,a as N,d as O,b as B,F as D,u as I,P as S}from"./index-DIquSlHJ.js";import{u as w,T as y}from"./useActions-DWr2HVYp.js";import{t as z}from"./transition-DYwsXx9t.js";function M(s){return v({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(s)}const f=({onClick:s,position:r,right:t,left:l,top:n})=>e.jsx("button",{style:{position:r,right:t,left:l,top:n},onClick:s,className:"closeBtn",children:e.jsx(M,{})});function g(s){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(s)}const H=({text:s,onClick:r})=>e.jsxs("button",{onClick:r,className:"delete-popup-btn",children:[e.jsx(g,{}),s]}),F=({text:s,onClick:r})=>e.jsx("button",{onClick:r,className:"cancel-popup-btn",children:s}),b=({children:s,closePopup:r,title:t,onClickDelete:l,onClickRemove:n,isPopupOpen:c})=>e.jsx("div",{className:`popup ${c?"open":""}`,children:e.jsxs("div",{className:"popup__body",children:[e.jsx(f,{right:-15,position:"absolute",top:-15,onClick:r}),e.jsxs("div",{className:"popup__content",children:[e.jsx("div",{className:"popup__top",children:e.jsx("h2",{className:"popup__title",children:t})}),e.jsx("div",{className:"popup__center",children:s}),e.jsx("div",{className:"popup__bottom",children:e.jsxs("div",{className:"popup__buttons",children:[e.jsx(F,{text:"Отмена",onClick:n}),e.jsx(H,{onClick:l,text:"Удалить"})]})})]})]})}),C=({onClick:s})=>e.jsx("button",{onClick:s,className:"deleteBtn",children:e.jsx(g,{})}),V=({id:s,photo:r,title:t,serialNumber:l})=>{const[n,c]=u.useState(!1),i=()=>{c(!0)},o=()=>{c(!1)},a=N(),d=h=>{a(O(h))};return e.jsxs(e.Fragment,{children:[e.jsx(_,{id:s,serialNumber:l,title:t,photo:r,handleDeleteClick:i}),e.jsx(b,{title:"Удалить этот продукт?",onClickRemove:o,closePopup:o,onClickDelete:()=>d(s),isPopupOpen:n,children:e.jsx("ul",{children:e.jsx(_,{id:s,serialNumber:l,title:t,photo:r,inPopup:!0})})})]})},_=({id:s,photo:r,title:t,serialNumber:l,handleDeleteClick:n,inPopup:c})=>e.jsx("li",{className:"order-products__list-item",children:e.jsx("div",{className:"order-product",children:e.jsxs("div",{className:"order-product__body",children:[e.jsxs("div",{className:"order-product__left",children:[e.jsx("img",{src:r,alt:""}),e.jsxs("div",{className:"order-products__info order-products__name",children:[e.jsx("span",{className:"product-item__underline",children:t}),e.jsx("span",{className:"product-item__serialNumber",children:l})]})]}),c?null:e.jsx("div",{className:"order-product__right",children:e.jsx(C,{onClick:n})})]})})},s);function E(s){return v({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 12v-1h9v1H1zm0-5h14v1H1V7zm11-4v1H1V3h11z"},child:[]}]})(s)}const R=({onClick:s})=>e.jsx("button",{onClick:s,className:"showProductsBtn",children:e.jsx(E,{})}),A=({title:s,date:r,products:t,id:l,onClick:n,openProducts:c})=>{const[i,o]=u.useState(!1),a=()=>{o(!0)},d=()=>{o(!1)},h=p=>{let x=0;return t.forEach(m=>{if(m.price!==void 0){const j=m.price[p];x+=j.value}}),x},P=N(),k=p=>{P(B(p))};return e.jsxs(e.Fragment,{children:[e.jsx(L,{openProducts:c,title:s,onClick:n,calculateOrderPrice:h,date:r,products:t,handleDeleteClick:a,id:l}),e.jsx(b,{title:"Удалить этот приход?",onClickRemove:d,onClickDelete:()=>k(l),closePopup:d,isPopupOpen:i,children:e.jsx("ul",{className:"order-item__popup-list",children:t.map(({id:p,title:x,photo:m,serialNumber:j})=>e.jsx(_,{id:p,serialNumber:j,title:x,photo:m,inPopup:!0},p))})})]})},L=({openProducts:s,title:r,onClick:t,calculateOrderPrice:l,date:n,products:c,handleDeleteClick:i,id:o})=>e.jsx("div",{id:o.toString(),className:"order-item",children:e.jsxs("div",{className:"order-item__body",children:[s&&e.jsx("div",{className:"order-item__info order-item__title",children:r}),e.jsxs("div",{className:"order-item__info order-item__show-products",children:[e.jsx(R,{onClick:t}),e.jsxs("div",{className:"order-item__products-lenght",children:[e.jsxs("span",{children:[c.length," "]}),e.jsx("span",{children:"Продукта"})]})]}),e.jsx("div",{className:"order-item__info",children:n}),s&&e.jsxs("div",{className:"order-item__info order-item__price",children:[e.jsxs("div",{className:"",children:[l!==void 0&&l(0),"$"]}),e.jsxs("div",{className:"",children:[l!==void 0&&l(1),"UAN"]})]}),s&&e.jsx("div",{className:"order-item__info",children:e.jsx(C,{onClick:i})})]})}),$=({products:s})=>e.jsx("ul",{className:"order-products__list",children:s.map(({id:r,title:t,photo:l,serialNumber:n})=>e.jsx(V,{serialNumber:n,id:r,title:t,photo:l},r))}),G=({onClick:s,text:r})=>e.jsxs("button",{onClick:s,className:"add-btn",children:[e.jsx(D,{}),r]}),T=()=>{const{orders:s,isLoading:r}=I(o=>o.orders),[t,l]=u.useState(null),{getOrders:n}=w();u.useEffect(()=>{n()},[n]);const c=u.useCallback(o=>{l(o===t?null:o)},[t]),i=u.useCallback(()=>{l(null)},[]);return r?e.jsx(S,{}):e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:t?"flex":"block"},className:"orders__bottom",children:[e.jsx("div",{className:"orders__bottom-left",children:s.map(({title:o,date:a,id:d,products:h})=>e.jsx(A,{id:d,products:h,title:o,date:a,openProducts:!t,isOpen:d===t,onClick:()=>c(d.toString())},d))}),e.jsx("div",{className:"orders__bottom-right",children:t&&s.filter(({id:o})=>o===t).map(({title:o,id:a,products:d})=>e.jsxs("div",{className:"orders__wrapper-products",children:[e.jsx("h2",{className:"orders__products-title",children:o}),e.jsx(G,{text:"Добавить продукт"}),e.jsx(f,{position:"absolute",right:-20,top:-20,onClick:i}),d.length!=0?e.jsx($,{title:o,products:d}):e.jsx("div",{className:"orders__nothing",children:"Продуктов нет!"})]},a))})]})})},U=()=>e.jsx("section",{className:"orders",children:e.jsxs("div",{className:"orders__body",children:[e.jsx("div",{className:"orders__top",children:e.jsx(y,{text:"Приходы"})}),e.jsx(T,{})]})}),Q=z(U);export{Q as default};
